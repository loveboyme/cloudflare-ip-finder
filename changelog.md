<div align="center">
  <h1> ✨ CloudFlare IP 扫描器 - 更新日志 ✨ </h1>
  <p> <b>版本 1.1.0</b> | 发布日期: <b>2025.3.3</b> </p>
  <hr>
</div>

🎉 **新增功能 & 改进 🎉**

本次更新为 CloudFlare IP 扫描器带来了重大改进，重点关注 **可靠性**、**持久性** 和 **配置灵活性**。请深入了解以下详细信息：

🚀 **全新功能**

*   **💾 IP 持久化:**
    *   告别每次都重新扫描 IP 段！扫描器现在可以智能地将生成的 IP 列表保存到文件（默认情况下位于您用户目录下的 `.cf_ip_list.txt`）。
    *   后续扫描将**重用并补充**此列表，从而显著加快扫描过程，尤其是在处理大型 IP 池时。 ⏳
    *   此功能**默认启用**，可以在 **配置窗口** 中切换。 ⚙️
*   **🔄 通过重试增强测试可靠性:**
    *   网络偶尔会打盹！为了确保更准确的延迟测量，我们实施了**测试重试**机制。 🛡️
    *   现在，每个 IP 地址在最终确定结果之前都会进行**多次延迟测试**（TCP、HTTP、HTTPS）。
    *   重试次数在 **配置窗口** 中是**可配置的**，允许您微调速度和准确性之间的平衡。 🎛️

⚙️ **配置更新**

*   **🔧 新增配置选项:**
    *   **测试重试次数:**  控制每次延迟测试重复的次数 (`test_retries`)。 在 **配置窗口** 的 “测试重试次数” 下找到它。
    *   **IP 持久化:** 启用或禁用 IP 列表的保存和重用 (`ip_persistent`)。 在 **配置窗口** 中切换 “启用IP持久化”。
    *   **IP 文件路径:** 虽然通常不需要，但高级用户现在可以直接在 `config.json` 文件中自定义 IP 列表文件的路径 (`ip_file_path`)。 📂

🛠️ **改进 & 底层变更**

*   **🧰 重构 IP 管理:**
    *   引入 `IPManager` 类！ 我们已将 IP 地址生成、加载和持久化精简到一个专用模块中，以实现更清晰和更可维护的代码。 🧹
*   **💧 代码清晰度提升:**
    *   通过引入 `_generate_ips_from_cidr`、`_calc_avg` 和 `_get_proxies` 等辅助方法，提高了代码的可读性。 这使得代码更易于理解和扩展。 ✨
*   **📊 更强大的延迟测试:**
    *   `test_latency` 函数现在返回 TCP、HTTP 和 HTTPS 的延迟值列表，由于重试机制，可以进行平均并获得更稳定的结果。 📈
    *   结果分析 (`analyze_results`) 现在可以正确地使用这些平均延迟值 (`tcp_avg`、`http_avg`、`https_avg`)。

✅ **小错误修复 & 优化**

*   **✨ 稳定性改进:** 重试机制隐含地解决了测试期间潜在的瞬时网络问题，从而提高了整体结果的一致性和可靠性。 💪

<hr>

**反馈 & 支持:**

如果您遇到任何问题或有任何建议，请随时在项目的 GitHub 存储库上开启 issue。 非常感谢您的反馈！ 🙏

<div align="center">
  <p> 感谢您使用 CloudFlare IP 扫描器！ 扫描愉快！ 🚀 </p>
</div>